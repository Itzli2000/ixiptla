---
import { Image } from 'astro:assets';
import { type ArtifactItem } from '../data/collection';
import { getLangFromUrl } from '../i18n/utils';

interface Props {
  artifact: ArtifactItem;
}

const { artifact } = Astro.props;
const lang = getLangFromUrl(Astro.url) as "en" | "es";
const name = artifact.name[lang] || artifact.name.es;
const { image, culture, period, slug } = artifact;
---

<article class="group bg-light rounded-xl overflow-hidden shadow-lg hover:shadow-xl transition-all duration-300">
  <div class="aspect-[4/3] overflow-hidden">
    <a 
    href={`/${lang}/${lang === 'es' ? 'coleccion' : 'collection'}/${slug}`}
      class="w-full h-full object-cover transition-transform duration-500 group-hover:scale-110"
    >
      <Image
        src={image} 
        alt={name}
        width={500}
        height={500}
        loading="lazy"
        class="transition-transform duration-500 group-hover:scale-110"
      />
    </a>
  </div>
  <div class="p-6 space-y-4">
    <h3 class="text-xl font-bold text-tertiary group-hover:text-main transition-colors">
      {name}
    </h3>
    <div class="flex items-center text-dark/70 text-sm">
      <span>{culture}</span>
      <span class="mx-2">•</span>
      <span>{period}</span>
      {artifact.location && (
        <>
          <span class="mx-2">•</span>
          <span>{artifact.location[lang] || artifact.location.es}</span>
        </>
      )}
    </div>
    {artifact.description && (
      <p class="text-dark/70 text-sm line-clamp-2">
        {artifact.description[lang] || artifact.description.es}
      </p>
    )}
    <a 
      href={`/${lang}/${lang === 'es' ? 'coleccion' : 'collection'}/${slug}`}
      class="inline-flex items-center text-main hover:text-dark font-medium transition-colors"
    >
      {lang === 'es' ? 'Ver más' : 'See more'}
      <svg class="ml-2 w-4 h-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width={2} d="M9 5l7 7-7 7" />
      </svg>
    </a>
  </div>
</article>